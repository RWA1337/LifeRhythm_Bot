import os
import math
import random
import asyncio
from datetime import datetime, date
from typing import List, Dict

from flask import Flask, request, jsonify

from telegram import Update, Bot
from telegram.constants import ParseMode
from telegram.ext import (
    Application, ApplicationBuilder, CommandHandler, CallbackContext
)

# ================================
# --------- –ö–û–ù–§–ò–ì --------------
# ================================
BOT_TOKEN = os.environ.get("BOT_TOKEN")
PUBLIC_URL = os.environ.get("PUBLIC_URL", "").rstrip("/")

if not BOT_TOKEN:
    raise RuntimeError("–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω BOT_TOKEN –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Render.")
if not PUBLIC_URL:
    raise RuntimeError("–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PUBLIC_URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, https://liferhythm-bot.onrender.com).")

TELEGRAM_WEBHOOK_PATH = "/webhook"
TELEGRAM_WEBHOOK_URL = f"{PUBLIC_URL}{TELEGRAM_WEBHOOK_PATH}"

PORT = int(os.environ.get("PORT", "10000"))

# ================================
# --------- –î–ê–ù–ù–´–ï --------------
# ================================

# –•—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ –ø–∞–º—è—Ç–∏ (–¥–ª—è Free-–∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ; –ø—Ä–∏ —Å–ª–∏–ø–µ Render —ç—Ç–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è)
WATER_STATE: Dict[int, Dict[str, int]] = {}   # user_id -> { 'YYYY-MM-DD': ml_int }
DOB_STATE: Dict[int, str] = {}                 # user_id -> 'YYYY-MM-DD'

# –£—Ç–∏–ª–∏—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —á–∏—Å–ª–∞ –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
def parse_n(args: List[str], default: int, min_v: int, max_v: int) -> int:
    if not args:
        return default
    try:
        n = int(args[0])
        return max(min_v, min(max_v, n))
    except Exception:
        return default

def chunk_text(text: str, limit: int = 3900) -> List[str]:
    # –î–µ–ª–∏—Ç –¥–ª–∏–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —á–∞—Å—Ç–∏, —á—Ç–æ–±—ã –Ω–µ —É–ø–µ—Ä–µ—Ç—å—Å—è –≤ –ª–∏–º–∏—Ç Telegram
    parts = []
    while len(text) > limit:
        cut = text.rfind("\n", 0, limit)
        if cut == -1:
            cut = limit
        parts.append(text[:cut])
        text = text[cut:]
    if text:
        parts.append(text)
    return parts

# -------------------------------
# –ë–û–õ–¨–®–ò–ï –ù–ê–ë–û–†–´ –ö–û–ù–¢–ï–ù–¢–ê
# -------------------------------

EXERCISES = [
    # 24 –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–º–ø–ª–µ–∫—Å–æ–≤ (–¥–æ–º–∞—à–Ω—è—è –∑–∞—Ä—è–¥–∫–∞/—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
    {"title": "–†–∞–∑–º–∏–Ω–∫–∞-5", "steps": [
        "–ö—Ä—É–≥–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è –ø–ª–µ—á: 30 —Å–µ–∫",
        "–ü–æ–≤–æ—Ä–æ—Ç—ã –∫–æ—Ä–ø—É—Å–∞: 30 —Å–µ–∫",
        "–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è: 15 —Ä–∞–∑",
        "–ü–ª–∞–Ω–∫–∞: 30 —Å–µ–∫",
        "–õ—ë–≥–∫–∏–π –±–µ–≥ –Ω–∞ –º–µ—Å—Ç–µ: 60 —Å–µ–∫",
    ]},
    {"title": "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π-7", "steps": [
        "–ü—Ä—ã–∂–∫–∏ –Ω–∞ –º–µ—Å—Ç–µ: 30 —Å–µ–∫",
        "–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è: 20 —Ä–∞–∑",
        "–û—Ç–∂–∏–º–∞–Ω–∏—è –æ—Ç —Å—Ç–µ–Ω—ã: 12 —Ä–∞–∑",
        "–°–∫—Ä—É—á–∏–≤–∞–Ω–∏—è –ª—ë–∂–∞: 20 —Ä–∞–∑",
        "–ü–ª–∞–Ω–∫–∞ –±–æ–∫–æ–≤–∞—è (–∫–∞–∂–¥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞): 20 —Å–µ–∫",
        "–í—ã–ø–∞–¥—ã –Ω–∞ –º–µ—Å—Ç–µ: 10/10",
        "–•–æ–¥—å–±–∞ –≤—ã—Å–æ–∫–æ –ø–æ–¥–Ω–∏–º–∞—è –∫–æ–ª–µ–Ω–∏: 60 —Å–µ–∫",
    ]},
    {"title": "–ë—ã—Å—Ç—Ä—ã–π —Ç–æ–Ω—É—Å", "steps": [
        "–î–∂–∞–º–ø–∏–Ω–≥-–¥–∂–µ–∫: 30 —Å–µ–∫",
        "–ü—Ä–∏—Å–µ–¥ + –ø–æ–¥—ä—ë–º —Ä—É–∫: 12 —Ä–∞–∑",
        "–û—Ç–∂–∏–º–∞–Ω–∏—è –∫–æ–ª–µ–Ω—è—Ö: 10 —Ä–∞–∑",
        "–ì–∏–ø–µ—Ä—ç–∫—Å—Ç–µ–Ω–∑–∏—è –ª—ë–∂–∞: 15 —Ä–∞–∑",
        "–ü–ª–∞–Ω–∫–∞: 40 —Å–µ–∫",
    ]},
    {"title": "–ö—Ä—É–≥-10 –º–∏–Ω—É—Ç", "steps": [
        "–ö—Ä—É–≥ –∏–∑ 5 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –ø–æ 40 —Å–µ–∫/20 —Å–µ–∫ –æ—Ç–¥—ã—Ö: –ø—Ä–∏—Å–µ–¥, –æ—Ç–∂–∏–º, –ø–ª–∞–Ω–∫–∞, –≤—ã–ø–∞–¥—ã, —Å–∫—Ä—É—á–∏–≤–∞–Ω–∏—è. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å 2 –∫—Ä—É–≥–∞",
    ]},
    {"title": "–ö–∞—Ä–¥–∏–æ-–ª–µ–≥–∫–æ", "steps": [
        "–ë–µ–≥ –Ω–∞ –º–µ—Å—Ç–µ: 60 —Å–µ–∫",
        "–ü—Ä—ã–∂–∫–∏: 30 —Å–µ–∫",
        "–®–∞–≥–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—ã —Å —Ö–ª–æ–ø–∫–æ–º: 60 —Å–µ–∫",
        "–•–æ–¥—å–±–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–∞—è: 60 —Å–µ–∫",
        "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –≤–µ—Å—å –±–ª–æ–∫ 2 —Ä–∞–∑–∞",
    ]},
    {"title": "–°–∏–ª–∞ –±–∞–∑–æ–≤–∞—è", "steps": [
        "–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è: 3√ó12",
        "–û—Ç–∂–∏–º–∞–Ω–∏—è –æ—Ç —Å—Ç—É–ª–∞: 3√ó8",
        "–Ø–≥–æ–¥–∏—á–Ω—ã–π –º–æ—Å—Ç: 3√ó15",
        "–ü–ª–∞–Ω–∫–∞: 3√ó30 —Å–µ–∫",
    ]},
    {"title": "–°–ø–∏–Ω–∞ –∏ –ø—Ä–µ—Å—Å", "steps": [
        "–õ–æ–¥–æ—á–∫–∞: 3√ó20 —Å–µ–∫",
        "–°—É–ø–µ—Ä–º–µ–Ω: 3√ó12",
        "–°–∫—Ä—É—á–∏–≤–∞–Ω–∏—è: 3√ó15",
        "–ü–ª–∞–Ω–∫–∞: 3√ó30 —Å–µ–∫",
    ]},
    {"title": "–ù–æ–≥–∏ –∏ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ", "steps": [
        "–í—ã–ø–∞–¥—ã: 3√ó10/10",
        "–Ø–≥–æ–¥–∏—á–Ω—ã–π –º–æ—Å—Ç: 3√ó15",
        "–ü—Ä–∏—Å–µ–¥ —É–∑–∫–∏–π/—à–∏—Ä–æ–∫–∏–π: 10+10",
        "–ë–∞–ª–∞–Ω—Å –Ω–∞ –æ–¥–Ω–æ–π –Ω–æ–≥–µ: 2√ó30 —Å–µ–∫/–Ω–æ–≥–∞",
    ]},
    {"title": "–ú–æ–±–∏–ª–∏—Ç–∏-–∫–æ–ª–µ–Ω–∏/—Ç–∞–∑", "steps": [
        "–ö—Ä—É–≥–∏ —Ç–∞–∑–æ–º: 30 —Å–µ–∫",
        "–†–∞—Å—Ç—è–∂–∫–∞ –∫–≤–∞–¥—Ä–∏—Ü–µ–ø—Å–∞: 30 —Å–µ–∫/–Ω–æ–≥–∞",
        "–†–∞—Å—Ç—è–∂–∫–∞ –∑–∞–¥–Ω–µ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –±–µ–¥—Ä–∞: 30 —Å–µ–∫/–Ω–æ–≥–∞",
        "–ü—Ä–∏—Å–µ–¥ —Å —É–¥–µ—Ä–∂–∞–Ω–∏–µ–º: 20 —Å–µ–∫",
    ]},
    {"title": "–û—Ñ–∏—Å-5 –º–∏–Ω—É—Ç", "steps": [
        "–ö—Ä—É–≥–∏ —à–µ–µ–π: 20 —Å–µ–∫",
        "–°–≤–µ–¥–µ–Ω–∏–µ/—Ä–∞–∑–≤–µ–¥–µ–Ω–∏–µ –ª–æ–ø–∞—Ç–æ–∫: 30 —Å–µ–∫",
        "–ù–∞–∫–ª–æ–Ω—ã –≤–ø–µ—Ä—ë–¥: 10 —Ä–∞–∑",
        "–†–∞—Å—Ç—è–∂–∫–∞ –∑–∞–ø—è—Å—Ç–∏–π: 30 —Å–µ–∫",
        "–•–æ–¥—å–±–∞: 60 —Å–µ–∫",
    ]},
    {"title": "–£—Ç—Ä–æ-—ç–Ω–µ—Ä–≥–∏—è", "steps": [
        "–ü–æ—Ç—è–≥–∏–≤–∞–Ω–∏—è —Å—Ç–æ—è: 30 —Å–µ–∫",
        "–ü—Ä–∏—Å–µ–¥ + –ø–æ–¥—ä—ë–º –Ω–∞ –Ω–æ—Å–∫–∏: 12 —Ä–∞–∑",
        "–ü–ª–∞–Ω–∫–∞: 30 —Å–µ–∫",
        "–î—ã—Ö–∞–Ω–∏–µ 4-2-6: 1 –º–∏–Ω",
    ]},
    {"title": "–í–µ—á–µ—Ä-—Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ", "steps": [
        "–ú—è–≥–∫–∏–µ –Ω–∞–∫–ª–æ–Ω—ã: 10 —Ä–∞–∑",
        "–ö–æ—à–∫–∞-–∫–æ—Ä–æ–≤–∞: 8 —Ä–∞–∑",
        "–ü–æ–∑–∞ —Ä–µ–±—ë–Ω–∫–∞: 60 —Å–µ–∫",
        "–õ—ë–≥–∫–∞—è –ø–ª–∞–Ω–∫–∞: 20 —Å–µ–∫",
    ]},
    {"title": "HIIT-–ª–∞–π—Ç", "steps": [
        "30 —Å–µ–∫ —Ä–∞–±–æ—Ç–∞ / 30 —Å–µ–∫ –æ—Ç–¥—ã—Ö √ó 10: –±–µ–≥ –Ω–∞ –º–µ—Å—Ç–µ, –ø—Ä–∏—Å–µ–¥-–ø—Ä—ã–∂–æ–∫ (–µ—Å–ª–∏ –º–æ–∂–Ω–æ), –æ—Ç–∂–∏–º–∞–Ω–∏—è, –∞–ª—å–ø–∏–Ω–∏—Å—Ç, –¥–∂–∞–º–ø–∏–Ω–≥-–¥–∂–µ–∫",
    ]},
    {"title": "–ö–æ—Ä-—Ü–µ–Ω—Ç—Ä", "steps": [
        "–ü–ª–∞–Ω–∫–∞ –ª–æ–∫—Ç–∏: 3√ó30 —Å–µ–∫",
        "–í–µ–ª–æ—Å–∏–ø–µ–¥: 3√ó20",
        "–ù–æ–∂–Ω–∏—Ü—ã: 3√ó20",
        "–ë–æ–∫–æ–≤–∞—è –ø–ª–∞–Ω–∫–∞: 2√ó20 —Å–µ–∫/—Å—Ç–æ—Ä–æ–Ω–∞",
    ]},
    {"title": "–ì—Ä—É–¥—å/—Ç—Ä–∏—Ü–µ–ø—Å", "steps": [
        "–û—Ç–∂–∏–º–∞–Ω–∏—è –æ—Ç —Å—Ç–µ–Ω—ã/–∫–æ–ª–µ–Ω: 3√ó10",
        "–û—Ç–∂–∏–º–∞–Ω–∏—è —É–∑–∫–∏–µ: 2√ó8",
        "–ó–∞–¥–Ω–∏–µ –æ—Ç–∂–∏–º–∞–Ω–∏—è –æ—Ç —Å—Ç—É–ª–∞: 3√ó8",
        "–†–∞—Å—Ç—è–∂–∫–∞ –≥—Ä—É–¥–∏: 30 —Å–µ–∫",
    ]},
    {"title": "–°–ø–∏–Ω–∞/–±–∏—Ü–µ–ø—Å –±–µ–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è", "steps": [
        "–¢—è–≥–∞ –ø–æ–ª–æ—Ç–µ–Ω—Ü–∞ (–∏–∑–æ–º–µ—Ç—Ä–∏—è): 3√ó20 —Å–µ–∫",
        "–°–≤–µ–¥–µ–Ω–∏–µ –ª–æ–ø–∞—Ç–æ–∫ –ª—ë–∂–∞: 3√ó12",
        "–°—É–ø–µ—Ä–º–µ–Ω: 3√ó12",
        "–†–∞—Å—Ç—è–∂–∫–∞ —Å–ø–∏–Ω—ã: 30 —Å–µ–∫",
    ]},
    {"title": "–ü–ª–µ—á–∏/—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è", "steps": [
        "–ö—Ä—É–≥–∏ —Ä—É–∫–∞–º–∏: 30 —Å–µ–∫",
        "Y-T-W –∏–∑–æ–º–µ—Ç—Ä–∏—è: 3√ó8",
        "–ü–ª–∞–Ω–∫–∞ —Å –∫–∞—Å–∞–Ω–∏–µ–º –ø–ª–µ—á: 3√ó12",
    ]},
    {"title": "–ù–æ–≥–∏‚Äî–±—ã—Å—Ç—Ä—ã–π —Ç–æ–Ω—É—Å", "steps": [
        "–ü—Ä–∏—Å–µ–¥: 3√ó15",
        "–í—ã–ø–∞–¥—ã –Ω–∞–∑–∞–¥: 3√ó10/10",
        "–ü–æ–¥—ä—ë–º—ã –Ω–∞ –Ω–æ—Å–∫–∏: 3√ó20",
        "–ò–∑–æ–º–µ—Ç—Ä–∏—è ‚Äî —Å—Ç–µ–Ω–∫–∞: 2√ó30 —Å–µ–∫",
    ]},
    {"title": "–ö–∞—Ä–¥–∏–æ-–ª–µ—Å—Ç–Ω–∏—Ü–∞", "steps": [
        "40 —Å–µ–∫ –±–µ–≥ ‚Äî 20 —Å–µ–∫ –æ—Ç–¥—ã—Ö",
        "50 —Å–µ–∫ –±–µ–≥ ‚Äî 25 —Å–µ–∫ –æ—Ç–¥—ã—Ö",
        "60 —Å–µ–∫ –±–µ–≥ ‚Äî 30 —Å–µ–∫ –æ—Ç–¥—ã—Ö",
        "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ü–∏–∫–ª 2 —Ä–∞–∑–∞",
    ]},
    {"title": "–†–∞—Å—Ç—è–∂–∫–∞ –ø–æ—Å–ª–µ –¥–Ω—è", "steps": [
        "–ò–∫—Ä—ã —É —Å—Ç–µ–Ω—ã: 30 —Å–µ–∫/–Ω–æ–≥–∞",
        "–ö–≤–∞–¥—Ä–∏—Ü–µ–ø—Å —Å—Ç–æ—è: 30 —Å–µ–∫/–Ω–æ–≥–∞",
        "–ë—ë–¥—Ä–∞ –∏ —è–≥–æ–¥–∏—Ü—ã: 30 —Å–µ–∫/–Ω–æ–≥–∞",
        "–ü–æ—è—Å–Ω–∏—Ü–∞ –ª—ë–∂–∞ –ø–æ–≤–æ—Ä–æ—Ç—ã: 30 —Å–µ–∫/—Å—Ç–æ—Ä–æ–Ω–∞",
    ]},
    {"title": "–ö–æ–ª–µ–Ω–∏‚Äî–±–µ—Ä–µ–∂–Ω–æ", "steps": [
        "–ú–æ–±–∏–ª–∏—Ç–∏ –≥–æ–ª–µ–Ω–æ—Å—Ç–æ–ø: 30 —Å–µ–∫/–Ω–æ–≥–∞",
        "–ü–æ–ª—É–ø—Ä–∏—Å–µ–¥ —Å–æ —Å—Ç—É–ª–æ–º: 3√ó10",
        "–®–∞–≥ –≤ —Å—Ç–æ—Ä–æ–Ω—É —Å —Ä–µ–∑–∏–Ω–∫–æ–π/–±–µ–∑: 3√ó12/12",
        "–†–∞—Å—Ç—è–∂–∫–∞ –∫–≤–∞–¥—Ä–∏—Ü–µ–ø—Å–∞: 30 —Å–µ–∫/–Ω–æ–≥–∞",
    ]},
    {"title": "–®–µ—è/–æ—Å–∞–Ω–∫–∞", "steps": [
        "–ü–æ–¥–±–æ—Ä–æ–¥–æ–∫ –∫ –≥–æ—Ä–ª—É (—á–∞–π–Ω-—Ç—É–∫): 3√ó10",
        "–ü–æ—Ç—è–≥–∏–≤–∞–Ω–∏–µ –º–∞–∫—É—à–∫–æ–π: 3√ó20 —Å–µ–∫",
        "–°–≤–µ–¥–µ–Ω–∏–µ –ª–æ–ø–∞—Ç–æ–∫: 3√ó12",
        "–†–∞—Å—Ç—è–∂–∫–∞ —Ç—Ä–∞–ø–µ—Ü–∏–π: 30 —Å–µ–∫/—Å—Ç–æ—Ä–æ–Ω–∞",
    ]},
    {"title": "5—Ö5 –º–∏–Ω—É—Ç (–Ω–∞ –¥–µ–Ω—å)", "steps": [
        "–ö–∞–∂–¥—ã–µ 2‚Äì3 —á–∞—Å–∞: 5 –º–∏–Ω—É—Ç ‚Äî 1 –º–∏–Ω —Ö–æ–¥—å–±–∞, 1 –º–∏–Ω –ø—Ä–∏—Å–µ–¥, 1 –º–∏–Ω –ø–ª–∞–Ω–∫–∞, 1 –º–∏–Ω –¥—ã—Ö–∞–Ω–∏–µ, 1 –º–∏–Ω —Ä–∞—Å—Ç—è–∂–∫–∞",
    ]},
    {"title": "–õ–∏–º—Ñ–∞/—Ä–∞–∑–æ–≥—Ä–µ–≤", "steps": [
        "–ü–æ—Ç—Ä—è—Ö–∏–≤–∞–Ω–∏–µ –∫–∏—Å—Ç—è–º–∏/—Å—Ç–æ–ø–∞–º–∏: 60 —Å–µ–∫",
        "–ü–æ—Ö–ª–æ–ø—ã–≤–∞–Ω–∏—è –ø–æ —Ç–µ–ª—É: 60 —Å–µ–∫",
        "–ü—Ä—ã–∂–∫–∏ –ª—ë–≥–∫–∏–µ: 30 —Å–µ–∫",
        "–î—ã—Ö–∞–Ω–∏–µ 4-4-4: 1 –º–∏–Ω",
    ]},
]

MEDITATIONS = [
    {"title": "–î—ã—Ö–∞–Ω–∏–µ 4‚Äì4‚Äì4 (–±–æ–∫c-–±—Ä–∏–∑)", "how": [
        "–í–¥–æ—Ö –Ω–∞ 4 —Å—á–µ—Ç–∞", "–ó–∞–¥–µ—Ä–∂–∫–∞ –Ω–∞ 4", "–í—ã–¥–æ—Ö –Ω–∞ 4", "–ó–∞–¥–µ—Ä–∂–∫–∞ –Ω–∞ 4", "5‚Äì8 —Ü–∏–∫–ª–æ–≤"
    ]},
    {"title": "4‚Äì7‚Äì8", "how": [
        "–í–¥–æ—Ö 4", "–ó–∞–¥–µ—Ä–∂–∫–∞ 7", "–í—ã–¥–æ—Ö 8", "4‚Äì6 —Ü–∏–∫–ª–æ–≤"
    ]},
    {"title": "–£–¥–ª–∏–Ω—ë–Ω–Ω—ã–π –≤—ã–¥–æ—Ö (2√ó)", "how": [
        "–í–¥–æ—Ö 4", "–í—ã–¥–æ—Ö 8", "3‚Äì5 –º–∏–Ω—É—Ç"
    ]},
    {"title": "–ö–æ–≥–µ—Ä–µ–Ω—Ç–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ 5/5", "how": [
        "–í–¥–æ—Ö 5 —Å–µ–∫", "–í—ã–¥–æ—Ö 5 —Å–µ–∫", "5‚Äì10 –º–∏–Ω—É—Ç"
    ]},
    {"title": "–ù–∞—Å–æ—Å (sigh breathing)", "how": [
        "–î–≤–∞ –±—ã—Å—Ç—Ä—ã—Ö –≤–¥–æ—Ö–∞ —á–µ—Ä–µ–∑ –Ω–æ—Å", "–î–ª–∏–Ω–Ω—ã–π –≤—ã–¥–æ—Ö —Ä—Ç–æ–º", "1‚Äì3 –º–∏–Ω—É—Ç—ã"
    ]},
    {"title": "–ö–≤–∞–¥—Ä–∞–Ω—Ç—ã —Ç–µ–ª–∞", "how": [
        "–í–Ω–∏–º–∞–Ω–∏–µ –ø–æ –∑–æ–Ω–∞–º: —Å—Ç–æ–ø—ã, —Ç–∞–∑, –≥—Ä—É–¥—å, –ª–∏—Ü–æ", "–ü–æ 30‚Äì60 —Å–µ–∫ –Ω–∞ –∑–æ–Ω—É", "3 –∫—Ä—É–≥–∞"
    ]},
    {"title": "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–∞", "how": [
        "–ú–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç –º–∞–∫—É—à–∫–∏ –∫ –ø–∞–ª—å—Ü–∞–º", "–ó–∞–º–µ—á–∞–π –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –æ—Ç–ø—É—Å–∫–∞–π", "5‚Äì10 –º–∏–Ω—É—Ç"
    ]},
    {"title": "–ú–µ—Ç—Ç–∞ (–¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å)", "how": [
        "–ú—ã—Å–ª–µ–Ω–Ω–æ: ¬´–ü—É—Å—Ç—å —è –±—É–¥—É —Å–ø–æ–∫–æ–µ–Ω‚Ä¶¬ª", "–†–∞—Å—à–∏—Ä—è–π –Ω–∞ –±–ª–∏–∑–∫–∏—Ö –∏ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã—Ö", "5 –º–∏–Ω—É—Ç"
    ]},
    {"title": "–ó–∞–∑–µ–º–ª–µ–Ω–∏–µ 5-4-3-2-1", "how": [
        "5 –≤–∏–∂—É, 4 —Å–ª—ã—à—É, 3 –æ—â—É—â–∞—é, 2 –æ–±–æ–Ω—è—é, 1 –≤–∫—É—à–∞—é", "2‚Äì3 –º–∏–Ω—É—Ç—ã"
    ]},
    {"title": "–ö–≤–∞–¥—Ä–∞—Ç –≤–Ω–∏–º–∞–Ω–∏—è", "how": [
        "–í–µ–¥—ë—à—å –≤–∑–≥–ª—è–¥ –ø–æ –≤–æ–æ–±—Ä–∞–∂–∞–µ–º–æ–º—É –∫–≤–∞–¥—Ä–∞—Ç—É —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å 4‚Äì4‚Äì4‚Äì4", "3 –º–∏–Ω—É—Ç—ã"
    ]},
    {"title": "–ß–µ—Ä–µ–∑ —à–∞–≥", "how": [
        "–í–¥–æ—Ö ‚Äî —à–∞–≥, –≤—ã–¥–æ—Ö ‚Äî –¥–≤–∞ —à–∞–≥–∞", "5‚Äì10 –º–∏–Ω—É—Ç –ø—Ä–æ–≥—É–ª–∫–∏"
    ]},
    {"title": "–î—ã—Ö–∞–Ω–∏–µ –∂–∏–≤–æ—Ç–æ–º", "how": [
        "–õ–∞–¥–æ–Ω—å –Ω–∞ –∂–∏–≤–æ—Ç", "–ù–∞ –≤–¥–æ—Ö–µ –∂–∏–≤–æ—Ç –ø–æ–¥ –ª–∞–¥–æ–Ω—å, –Ω–∞ –≤—ã–¥–æ—Ö–µ ‚Äî –Ω–∞–∑–∞–¥", "5 –º–∏–Ω—É—Ç"
    ]},
    {"title": "–†–∏—Ç–º 6/4", "how": [
        "–í–¥–æ—Ö 6, –≤—ã–¥–æ—Ö 4", "3‚Äì5 –º–∏–Ω—É—Ç"
    ]},
    {"title": "–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ", "how": [
        "–°–∏–¥–∏—à—å —É–¥–æ–±–Ω–æ", "–û—Ç–º–µ—á–∞–µ—à—å –≤–¥–æ—Ö/–≤—ã–¥–æ—Ö", "–ö–æ–≥–¥–∞ —É–Ω–æ—Å–∏—Ç ‚Äî –º—è–≥–∫–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—à—å", "5‚Äì10 –º–∏–Ω—É—Ç"
    ]},
    {"title": "–¢—Ä–∏ –≥–ª—É–±–æ–∫–∏—Ö –≤—ã–¥–æ—Ö–∞", "how": [
        "3 –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –≥–ª—É–±–æ–∫–∏—Ö –≤—ã–¥–æ—Ö–∞ —Å —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ–º –ø–ª–µ—á –∏ —á–µ–ª—é—Å—Ç–∏"
    ]},
    {"title": "–ö–ª–∏–Ω–æ–≤–æ–µ (–Ω–∞ —Å–æ–Ω)", "how": [
        "–í–¥–æ—Ö 4, –≤—ã–¥–æ—Ö 6‚Äì8", "–í –∫—Ä–æ–≤–∞—Ç–∏ 5 –º–∏–Ω—É—Ç"
    ]},
    {"title": "–†–∏—Ç–º 3-3-6", "how": [
        "–í–¥–æ—Ö 3, —É–¥–µ—Ä–∂–∞–Ω–∏–µ 3, –≤—ã–¥–æ—Ö 6", "3‚Äì5 –º–∏–Ω—É—Ç"
    ]},
    {"title": "–®—É–º –º–æ—Ä—è (—É–¥–∂–∞–π–∏-–ª–∞–π—Ç)", "how": [
        "–õ—ë–≥–∫–æ–µ —Å—É–∂–µ–Ω–∏–µ –≥–æ—Ä–ª–∞, —Ä–æ–≤–Ω—ã–π —à—É–º –Ω–∞ –≤—ã–¥–æ—Ö–µ", "2‚Äì3 –º–∏–Ω—É—Ç—ã"
    ]},
    {"title": "–ú–∏–∫—Ä–æ–ø–∞—É–∑a", "how": [
        "1 –º–∏–Ω—É—Ç–∞: 6 –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ 5/5 —Å —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ–º –ø–ª–µ—á"
    ]},
    {"title": "–ö–æ–≥–µ—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å —à–∞–≥–∞–º–∏", "how": [
        "–í–¥–æ—Ö 4 —à–∞–≥–∞, –≤—ã–¥–æ—Ö 6 —à–∞–≥–æ–≤", "5‚Äì10 –º–∏–Ω—É—Ç"
    ]},
]

YOGA = [
    {"title": "–ì–æ—Ä–∞ (–¢–∞–¥–∞—Å–∞–Ω–∞)", "how": [
        "–°—Ç–æ–ø—ã –≤–º–µ—Å—Ç–µ/–Ω–∞ —à–∏—Ä–∏–Ω–µ —Ç–∞–∑–∞", "–ú–∞–∫—É—à–∫–∞ –≤–≤–µ—Ä—Ö, –ø–ª–µ—á–∏ –≤–Ω–∏–∑", "–î—ã—Ö–∞–Ω–∏–µ —Ä–æ–≤–Ω–æ–µ 5‚Äì10 —Ü–∏–∫–ª–æ–≤"
    ]},
    {"title": "–î–µ—Ä–µ–≤–æ (–í—Ä–∏–∫—à–∞—Å–∞–Ω–∞)", "how": [
        "–°—Ç–æ–π –Ω–∞ –æ–¥–Ω–æ–π –Ω–æ–≥–µ", "–°—Ç–æ–ø–∞ –∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º—É –±–µ–¥—Ä—É/–≥–æ–ª–µ–Ω–∏", "–õ–∞–¥–æ–Ω–∏ –≤–º–µ—Å—Ç–µ", "30‚Äì60 —Å–µ–∫/–Ω–æ–≥–∞"
    ]},
    {"title": "–°–æ–±–∞–∫–∞ –º–æ—Ä–¥–æ–π –≤–Ω–∏–∑", "how": [
        "–õ–∞–¥–æ–Ω–∏ —à–∏—Ä–æ–∫–æ, —Ç–∞–∑ –≤–≤–µ—Ä—Ö", "–ü—è—Ç–∫–∏ –∫ –ø–æ–ª—É, —Å–ø–∏–Ω–∞ –≤—ã—Ç—è–Ω—É—Ç–∞", "5‚Äì8 –¥—ã—Ö–∞–Ω–∏–π"
    ]},
    {"title": "–ö–æ—à–∫–∞‚Äì–∫–æ—Ä–æ–≤–∞", "how": [
        "–ù–∞ –≤–¥–æ—Ö ‚Äî –ø—Ä–æ–≥–∏–±, –Ω–∞ –≤—ã–¥–æ—Ö ‚Äî –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ", "8‚Äì10 —Ü–∏–∫–ª–æ–≤"
    ]},
    {"title": "–ü–æ–∑–∞ —Ä–µ–±—ë–Ω–∫–∞", "how": [
        "–°—è–¥—å –Ω–∞ –ø—è—Ç–∫–∏, –ª–æ–± –∫ –∫–æ–≤—Ä–∏–∫—É", "–î—ã—Ö–∞–Ω–∏–µ —Å–ø–∏–Ω–æ–π", "1‚Äì2 –º–∏–Ω—É—Ç—ã"
    ]},
    {"title": "–í–æ–∏–Ω II", "how": [
        "–®–∏—Ä–æ–∫–∞—è —Å—Ç–æ–π–∫–∞, –∫–æ–ª–µ–Ω–æ –Ω–∞–¥ –ø—è—Ç–∫–æ–π", "–†—É–∫–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—ã", "5‚Äì8 –¥—ã—Ö–∞–Ω–∏–π/—Å—Ç–æ—Ä–æ–Ω–∞"
    ]},
    {"title": "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫", "how": [
        "–ù–æ–≥–∞ –≤–ø–µ—Ä–µ–¥–∏ –ø—Ä—è–º–∞—è", "–†—É–∫–∞ –∫ –≥–æ–ª–µ–Ω–∏/–±–ª–æ–∫—É", "–ì—Ä—É–¥—å —Ä–∞—Å–∫—Ä—ã—Ç–∞", "5 –¥—ã—Ö–∞–Ω–∏–π/—Å—Ç–æ—Ä–æ–Ω–∞"
    ]},
    {"title": "–ü–æ–∑–∞ —Å—Ç—É–ª–∞", "how": [
        "–ö–æ–ª–µ–Ω–∏ –Ω–∞–∑–∞–¥, —Ç–∞–∑ –Ω–∞–∑–∞–¥", "–†—É–∫–∏ –≤–≤–µ—Ä—Ö", "5‚Äì8 –¥—ã—Ö–∞–Ω–∏–π"
    ]},
    {"title": "–ü–æ–ª—É–º–æ—Å—Ç", "how": [
        "–õ—ë–∂–∞, —Å—Ç–æ–ø—ã –∫ —Ç–∞–∑—É", "–¢–∞–∑ –≤–≤–µ—Ä—Ö", "5 –¥—ã—Ö–∞–Ω–∏–π"
    ]},
    {"title": "–°—Ñ–∏–Ω–∫—Å", "how": [
        "–õ—ë–∂–∞ –Ω–∞ –∂–∏–≤–æ—Ç–µ, –ø—Ä–µ–¥–ø–ª–µ—á—å—è –ø–æ–¥ –ø–ª–µ—á–∞–º–∏", "–ú—è–≥–∫–∏–π –ø—Ä–æ–≥–∏–±", "1‚Äì2 –º–∏–Ω—É—Ç—ã"
    ]},
    {"title": "–ì–æ–ª—É–±—å (–ª–∞–π—Ç)", "how": [
        "–ò–∑ —Å–æ–±–∞–∫–∏ –≤–Ω–∏–∑ ‚Äî –∫–æ–ª–µ–Ω–æ –≤–ø–µ—Ä—ë–¥", "–¢–∞–∑ —Ä–æ–≤–Ω—ã–π, –∫–æ—Ä–ø—É—Å –≤–Ω–∏–∑", "1 –º–∏–Ω/—Å—Ç–æ—Ä–æ–Ω–∞"
    ]},
    {"title": "–ü–æ–≤–æ—Ä–æ—Ç—ã –ª—ë–∂–∞", "how": [
        "–ö–æ–ª–µ–Ω–∏ —Å–æ–≥–Ω—É—Ç—ã, –ø–∞–¥–µ–Ω–∏–µ –≤ —Å—Ç–æ—Ä–æ–Ω—É", "–ü–ª–µ—á–∏ –ø—Ä–∏–∂–∞—Ç—ã", "1 –º–∏–Ω/—Å—Ç–æ—Ä–æ–Ω–∞"
    ]},
    {"title": "–°–∫—Ä—É—Ç–∫–∞ —Å–∏–¥—è", "how": [
        "–°–ø–∏–Ω–∞ —Ä–æ–≤–Ω–∞—è", "–ü–æ–≤–æ—Ä–æ—Ç –æ—Ç —Ç–∞–∑–∞", "5 –¥—ã—Ö–∞–Ω–∏–π/—Å—Ç–æ—Ä–æ–Ω–∞"
    ]},
    {"title": "–ù–∞–∫–ª–æ–Ω —Å–∏–¥—è", "how": [
        "–°–ø–∏–Ω–∞ –¥–ª–∏–Ω–Ω–∞—è", "–°–∫–ª–∞–¥–∫–∞ –æ—Ç —Ç–∞–∑–æ–±–µ–¥—Ä–µ–Ω–Ω—ã—Ö", "8 –¥—ã—Ö–∞–Ω–∏–π"
    ]},
    {"title": "–ü–æ–∑–∞ –ª–æ–¥–∫–∏ (–ª–∞–π—Ç)", "how": [
        "–°–∏–¥—è, –∫–æ—Ä–ø—É—Å –Ω–∞–∑–∞–¥, –Ω–æ–≥–∏ —Å–æ–≥–Ω—É—Ç—ã", "–î–µ—Ä–∂–∏ —Ü–µ–Ω—Ç—Ä", "20‚Äì30 —Å–µ–∫"
    ]},
    {"title": "–ü–ª–∞–Ω–∫–∞", "how": [
        "–õ–∞–¥–æ–Ω–∏ –ø–æ–¥ –ø–ª–µ—á–∞–º–∏", "–ö–æ—Ä –∫—Ä–µ–ø–∫–∏–π, —Ç–µ–ª–æ –ø—Ä—è–º–æ–µ", "20‚Äì40 —Å–µ–∫"
    ]},
    {"title": "–ë–æ–∫–æ–≤–∞—è –ø–ª–∞–Ω–∫–∞ (–∫–æ–ª–µ–Ω–æ –≤ –ø–æ–ª)", "how": [
        "–ü—Ä–µ–¥–ø–ª–µ—á—å–µ/–ª–∞–¥–æ–Ω—å, –Ω–∏–∂–Ω–µ–µ –∫–æ–ª–µ–Ω–æ –≤ –ø–æ–ª", "–¢–∞–∑ –≤–≤–µ—Ä—Ö", "20‚Äì30 —Å–µ–∫/—Å—Ç–æ—Ä–æ–Ω–∞"
    ]},
    {"title": "–û—Ä–µ–ª (—Ä—É–∫–∏)", "how": [
        "–†—É–∫–∏ –ø–µ—Ä–µ–ø–ª–µ—Å—Ç–∏, –ø–ª–µ—á–∏ –≤–Ω–∏–∑", "5‚Äì8 –¥—ã—Ö–∞–Ω–∏–π"
    ]},
    {"title": "–í–µ—Ä–±–ª—é–¥ (–ª–∞–π—Ç)", "how": [
        "–ö–æ–ª–µ–Ω–∏ –ø–æ–¥ —Ç–∞–∑–æ–º, –ª–∞–¥–æ–Ω–∏ –Ω–∞ –∫—Ä–µ—Å—Ç–µ—Ü", "–ú—è–≥–∫–∏–π –ø—Ä–æ–≥–∏–±", "5 –¥—ã—Ö–∞–Ω–∏–π"
    ]},
    {"title": "–ü–æ–∑–∞ —É–≥–ª–∞ —É —Å—Ç–µ–Ω—ã", "how": [
        "–ù–æ–≥–∏ –Ω–∞ —à–∏—Ä–∏–Ω–µ, –Ω–∞–∫–ª–æ–Ω —Å –æ–ø–æ—Ä–æ–π", "–†—É–∫–∏ –Ω–∞ —Å—Ç–µ–Ω–µ", "8 –¥—ã—Ö–∞–Ω–∏–π"
    ]},
    {"title": "–°—á–∞—Å—Ç–ª–∏–≤—ã–π —Ä–µ–±—ë–Ω–æ–∫", "how": [
        "–õ—ë–∂–∞, –∫–æ–ª–µ–Ω–∏ –∫ –ø–æ–¥–º—ã—à–∫–∞–º, —Å—Ç–æ–ø—ã –≤ —Ä—É–∫–∏", "–ü–æ—è—Å–Ω–∏—Ü–∞ –≤ –ø–æ–ª", "1 –º–∏–Ω"
    ]},
    {"title": "–ë–∞–±–æ—á–∫–∞", "how": [
        "–°—Ç–æ–ø—ã –≤–º–µ—Å—Ç–µ, –∫–æ–ª–µ–Ω–∏ –≤—Ä–æ–∑—å", "–ù–∞–∫–ª–æ–Ω –≤–ø–µ—Ä—ë–¥ –ª–µ–≥–∫–æ", "1‚Äì2 –º–∏–Ω—É—Ç—ã"
    ]},
    {"title": "–®–∞–≤–∞—Å–∞–Ω–∞", "how": [
        "–õ—ë–∂–∞, —Ç–µ–ª–æ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–æ", "3‚Äì5 –º–∏–Ω—É—Ç –ø–æ–∫–æ—è"
    ]},
    {"title": "–ü–æ–ª—É–º–µ—Å—è—Ü —É —Å—Ç–µ–Ω—ã", "how": [
        "–ë–æ–∫–æ–º –∫ —Å—Ç–µ–Ω–µ, —Ä—É–∫–∞ –≤–≤–µ—Ä—Ö, –Ω–∞–∫–ª–æ–Ω –≤ —Å—Ç–æ—Ä–æ–Ω—É", "5‚Äì8 –¥—ã—Ö–∞–Ω–∏–π/—Å—Ç–æ—Ä–æ–Ω–∞"
    ]},
]

NUTRITION_TIPS = [
    # 50 –∫—Ä–∞—Ç–∫–∏—Ö –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    "–°—Ç–∞—Ä—Ç –¥–Ω—è —Å–æ —Å—Ç–∞–∫–∞–Ω–∞ –≤–æ–¥—ã (250‚Äì300 –º–ª).",
    "–î–æ–±–∞–≤–ª—è–π –±–µ–ª–æ–∫ –≤ –∫–∞–∂–¥—ã–π –ø—Ä–∏—ë–º –ø–∏—â–∏ (—è–π—Ü–∞/—Ä—ã–±–∞/—Ç–≤–æ—Ä–æ–≥/–±–æ–±–æ–≤—ã–µ).",
    "–û–≤–æ—â–∏ ‚Äî –Ω–µ –º–µ–Ω—å—à–µ 400 –≥ –≤ –¥–µ–Ω—å (2‚Äì3 –ø–æ—Ä—Ü–∏–∏).",
    "–§—Ä—É–∫—Ç—ã ‚Äî 1‚Äì2 –ø–æ—Ä—Ü–∏–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ.",
    "–°–ª–æ–∂–Ω—ã–µ —É–≥–ª–µ–≤–æ–¥—ã: –∫—Ä—É–ø—ã, —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–æ–π —Ö–ª–µ–±, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å –≤ –º—É–Ω–¥–∏—Ä–µ.",
    "–ü–æ–ª–µ–∑–Ω—ã–µ –∂–∏—Ä—ã: –æ–ª–∏–≤–∫–æ–≤–æ–µ, –æ—Ä–µ—Ö–∏, —Å–µ–º–µ–Ω–∞, –∞–≤–æ–∫–∞–¥–æ.",
    "–°–æ–∫—Ä–∞—Ç–∏ —Å–∞—Ö–∞—Ä –∏ —Å–ª–∞–¥–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏.",
    "–ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π —É–ª—å—Ç—Ä–∞–ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã.",
    "–ï—à—å –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é, –≤—ã–¥–µ—Ä–∂–∏–≤–∞–π –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã 3‚Äì5 —á–∞—Å–æ–≤.",
    "–°–ª–µ–¥–∏ –∑–∞ —Ä–∞–∑–º–µ—Ä–æ–º –ø–æ—Ä—Ü–∏–π ‚Äî —Ç–∞—Ä–µ–ª–∫–∞: 1/2 –æ–≤–æ—â–∏, 1/4 –±–µ–ª–æ–∫, 1/4 –≥–∞—Ä–Ω–∏—Ä.",
    "–ü–µ–π 30‚Äì35 –º–ª –≤–æ–¥—ã –Ω–∞ –∫–≥ –º–∞—Å—Å—ã (–æ—Ä–∏–µ–Ω—Ç–∏—Ä, –Ω–µ –¥–æ–≥–º–∞).",
    "–°–æ–ª—å –¥–æ 5 –≥/—Å—É—Ç–∫–∏, –±–æ–ª—å—à–µ —Å–ø–µ—Ü–∏–π –∏ —Ç—Ä–∞–≤.",
    "–ù–∞ –ø–µ—Ä–µ–∫—É—Å –ª—É—á—à–µ –æ—Ä–µ—Ö–∏/–π–æ–≥—É—Ä—Ç/—Ñ—Ä—É–∫—Ç—ã, –∞ –Ω–µ –ø–µ—á–µ–Ω—å–µ.",
    "–ö–æ—Ñ–µ –¥–æ 2‚Äì3 —á–∞—à–µ–∫, –Ω–µ –ø–æ–∑–¥–Ω–æ –≤–µ—á–µ—Ä–æ–º.",
    "–£–∂–∏–Ω –∑–∞ 2‚Äì3 —á–∞—Å–∞ –¥–æ —Å–Ω–∞.",
    "–ü–µ—Ä–µ–¥ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π ‚Äî —É–≥–ª–µ–≤–æ–¥—ã + –Ω–µ–º–Ω–æ–≥–æ –±–µ–ª–∫–∞ (–±–∞–Ω–∞–Ω + –π–æ–≥—É—Ä—Ç).",
    "–ü–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî –±–µ–ª–æ–∫ 20‚Äì30 –≥ –∏ –≤–æ–¥–∞.",
    "–°–ª–µ–¥–∏ –∑–∞ —Ä–µ–∞–∫—Ü–∏–µ–π –Ω–∞ –º–æ–ª–æ—á–∫—É/–≥–ª—é—Ç–µ–Ω ‚Äî –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ.",
    "–ê–ª–∫–æ–≥–æ–ª—å –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å/–∏—Å–∫–ª—é—á–∏—Ç—å.",
    "–ü–ª–∞–Ω–∏—Ä—É–π –º–µ–Ω—é –Ω–∞ 2‚Äì3 –¥–Ω—è ‚Äî –º–µ–Ω—å—à–µ —Å—Ä—ã–≤–æ–≤.",
    "–•—Ä–∞–Ω–µ–Ω–∏–µ: –≥–æ—Ç–æ–≤—å –∫—Ä—É–ø—ã/–±–µ–ª–æ–∫ –∑–∞—Ä–∞–Ω–µ–µ, –¥–µ—Ä–∂–∏ –æ–≤–æ—â–∏ –Ω–∞—Ä–µ–∑–∞–Ω–Ω—ã–º–∏.",
    "–°–æ—É—Å—ã –¥–µ–ª–∞–π —Å–∞–º: –π–æ–≥—É—Ä—Ç + –≥–æ—Ä—á–∏—Ü–∞/—Ç—Ä–∞–≤—ã.",
    "–ó–∞–≤—Ç—Ä–∞–∫ —Å –±–µ–ª–∫–æ–º (–æ–º–ª–µ—Ç/—Ç–≤–æ—Ä–æ–≥) —É–ª—É—á—à–∞–µ—Ç —Å—ã—Ç–æ—Å—Ç—å.",
    "–î–æ–±–∞–≤–ª—è–π –±–æ–±–æ–≤—ã–µ 3‚Äì4 —Ä–∞–∑–∞/–Ω–µ–¥ ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –∫–ª–µ—Ç—á–∞—Ç–∫–∏ –∏ –±–µ–ª–∫–∞.",
    "–¶–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤—ã–µ –º–∞–∫–∞—Ä–æ–Ω—ã –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω—ã—Ö.",
    "–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ ‚Äî –±–æ–ª—å—à–µ –∑–∞–ø–µ–∫–∞–Ω–∏—è –∏ —Ç—É—à–µ–Ω–∏—è, –º–µ–Ω—å—à–µ –∂–∞—Ä–∫–∏.",
    "–°–ª–∞–¥–æ—Å—Ç–∏ ‚Äî –ø–æ –ø—Ä–∞–≤–∏–ª—É 1 –ø–æ—Ä—Ü–∏—è/–¥–µ–Ω—å –ø–æ—Å–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–π –µ–¥—ã.",
    "–í–∑–≤–µ—à–∏–≤–∞–π—Å—è 1‚Äì2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é —É—Ç—Ä–æ–º ‚Äî –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ç—Ä–µ–Ω–¥–∞.",
    "–í–µ–¥–∏ —Ñ–æ—Ç–æ-–¥–Ω–µ–≤–Ω–∏–∫ –µ–¥—ã ‚Äî –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞.",
    "–ï—Å–ª–∏ —Ç—è–Ω–µ—Ç –Ω–∞ —Å–ª–∞–¥–∫–æ–µ ‚Äî —Å–Ω–∞—á–∞–ª–∞ –≤–æ–¥–∞ –∏ –ø—Ä–æ–≥—É–ª–∫–∞ 10 –º–∏–Ω.",
    "–ï—à—å –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ: –±–µ–∑ —ç–∫—Ä–∞–Ω–∞, –º–µ–¥–ª–µ–Ω–Ω–æ, –æ—Ç–º–µ—á–∞–π –≤–∫—É—Å.",
    "–ö–ª–µ—Ç—á–∞—Ç–∫–∞ 25‚Äì30 –≥/–¥–µ–Ω—å (–æ–≤–æ—â–∏, –±–æ–±–æ–≤—ã–µ, —Ü–µ–ª—å–Ω—ã–µ –∑–ª–∞–∫–∏).",
    "–†—ã–±–∞ 2 —Ä–∞–∑–∞/–Ω–µ–¥., –≤ —Ç. —á. –∂–∏—Ä–Ω–∞—è.",
    "–ö—Ä–∞—Å–Ω–æ–µ –º—è—Å–æ ‚â§ 1‚Äì2 —Ä–∞–∑–∞/–Ω–µ–¥.",
    "–Ø–π—Ü–∞: –æ—Ç 4 –¥–æ 7 —à—Ç/–Ω–µ–¥. ‚Äî –ø–æ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—é.",
    "–ü—Ä–æ–≤–µ—Ä—è–π –≤–∏—Ç–∞–º–∏–Ω D –ø–æ –∞–Ω–∞–ª–∏–∑—É –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π —Å –≤—Ä–∞—á–æ–º.",
    "–†–∞–∑ –≤ 3‚Äì4 —á–∞—Å–∞ ‚Äî —Å—Ç–∞–∫–∞–Ω –≤–æ–¥—ã.",
    "–°–Ω—ç–∫–∏ —É–ø–∞–∫—É–π –∑–∞—Ä–∞–Ω–µ–µ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã).",
    "–≠–∫–æ–Ω–æ–º–∏—è: –∫—Ä—É–ø—ã/–±–æ–±–æ–≤—ã–µ ‚Äî –±–∞–∑–∞ –±—é–¥–∂–µ—Ç–∞.",
    "–°–µ–∑–æ–Ω–Ω—ã–µ –æ–≤–æ—â–∏/—Ñ—Ä—É–∫—Ç—ã ‚Äî –¥–µ—à–µ–≤–ª–µ –∏ –≤–∫—É—Å–Ω–µ–µ.",
    "–£–º–µ–Ω—å—à–∞–π –∂–∏–¥–∫–∏–µ –∫–∞–ª–æ—Ä–∏–∏ (—Å–æ–∫–∏/–ª–∞—Ç—Ç–µ).",
    "–ô–æ–≥—É—Ä—Ç ‚Äî –±–µ–∑ —Å–∞—Ö–∞—Ä–∞, –¥–æ–±–∞–≤—å —è–≥–æ–¥—ã —Å–∞–º.",
    "–°—ã—Ä—ã ‚Äî –Ω–µ–±–æ–ª—å—à–∏–µ –ø–æ—Ä—Ü–∏–∏, –∫–∞–∫ –¥–µ–ª–∏–∫–∞—Ç–µ—Å.",
    "–ß–∞–π –±–µ–∑ —Å–∞—Ö–∞—Ä–∞, –ø–æ–ø—Ä–æ–±—É–π —Ç—Ä–∞–≤—è–Ω—ã–µ.",
    "–ó–∞–≤—Ç—Ä–∞–∫–∏ —Ä–æ—Ç–∏—Ä—É–π (3‚Äì4 –≤–∞—Ä–∏–∞–Ω—Ç–∞) ‚Äî –º–µ–Ω—å—à–µ —Å–∫—É–∫–∏.",
    "–ü–æ—Ä—Ü–∏–æ–Ω–Ω–∞—è –ø–æ—Å—É–¥–∞ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–µ –ø–µ—Ä–µ–µ–¥–∞—Ç—å.",
    "–û—Ü–µ–Ω–∏ —Å—ã—Ç–æ—Å—Ç—å –ø–æ —à–∫–∞–ª–µ 1‚Äì10 –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è –Ω–∞ 7‚Äì8.",
    "–ï—à—å –±–æ–ª—å—à–µ –¥–æ–º–∞, —á–µ–º –≤–Ω–µ –¥–æ–º–∞.",
    "–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ ‚Äî –≤—Å–µ–≥–¥–∞, –±–µ–∑ –Ω–µ–≥–æ –Ω–µ –∑–∞—Ö–æ–¥–∏.",
    "–ü–æ–º–Ω–∏ –ø—Ä–æ –æ—Ä–µ—Ö–∏: 20‚Äì30 –≥ ‚Äî –ø–æ—Ä—Ü–∏—è.",
]

ANALYSIS_DB = {
    # 35 —Å–ø—Ä–∞–≤–æ–∫ –ø–æ –∞–Ω–∞–ª–∏–∑–∞–º (–∫—Ä–∞—Ç–∫–æ, –ø–æ–Ω—è—Ç–Ω–æ, –ù–ï –º–µ–¥—Å–æ–≤–µ—Ç, –∞ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã)
    "hemoglobin": "–ì–µ–º–æ–≥–ª–æ–±–∏–Ω ‚Äî –ø–µ—Ä–µ–Ω–æ—Å –∫–∏—Å–ª–æ—Ä–æ–¥–∞. –ù–∏–∑–∫–∏–π: —É—Å—Ç–∞–ª–æ—Å—Ç—å, –±–ª–µ–¥–Ω–æ—Å—Ç—å. –í—ã—Å–æ–∫–∏–π: –æ–±–µ–∑–≤–æ–∂–∏–≤–∞–Ω–∏–µ/–∫—É—Ä–µ–Ω–∏–µ/–≥–æ—Ä—ã. –û—Ü–µ–Ω–∏–≤–∞—Ç—å —Å —ç—Ä–∏—Ç—Ä–æ—Ü–∏—Ç–∞–º–∏/—Ñ–µ—Ä—Ä–∏—Ç–∏–Ω–æ–º.",
    "ferritin": "–§–µ—Ä—Ä–∏—Ç–∏–Ω ‚Äî –∑–∞–ø–∞—Å –∂–µ–ª–µ–∑–∞. –ù–∏–∑–∫–∏–π ‚Äî —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞ —É—Å—Ç–∞–ª–æ—Å—Ç–∏/–≤—ã–ø–∞–¥–µ–Ω–∏—è –≤–æ–ª–æ—Å. –í—ã—Å–æ–∫–∏–π ‚Äî –≤–æ—Å–ø–∞–ª–µ–Ω–∏–µ/–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –∂–µ–ª–µ–∑–æ–º. –°–º–æ—Ç—Ä–∏ CRP, –≥–µ–º–æ–≥–ª–æ–±–∏–Ω.",
    "vitamin_d": "–í–∏—Ç–∞–º–∏–Ω D ‚Äî –∫–æ—Å—Ç–∏/–∏–º–º—É–Ω–∏—Ç–µ—Ç. –ù–∏–∑–∫–∏–π —á–∞—Å—Ç ‚Äî —É —Å–∏–¥—è—â–∏—Ö –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏. –ö–æ—Ä—Ä–µ–∫—Ü–∏—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø–æ —Å—Ö–µ–º–µ –≤—Ä–∞—á–∞.",
    "b12": "–í12 ‚Äî –Ω–µ—Ä–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞/–∫—Ä–æ–≤–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ. –î–µ—Ñ–∏—Ü–∏—Ç: –ø–æ–∫–∞–ª—ã–≤–∞–Ω–∏—è, —Å–ª–∞–±–æ—Å—Ç—å. –í–æ–∑–º–æ–∂–µ–Ω –ø—Ä–∏ –≤–µ–≥–∞–Ω—Å—Ç–≤–µ/–≥–∞—Å—Ç—Ä–∏—Ç–∞—Ö.",
    "glucose": "–ì–ª—é–∫–æ–∑–∞ –Ω–∞—Ç–æ—â–∞–∫. –í—ã—Å–æ–∫–∞—è ‚Äî —Ä–∏—Å–∫ –ø—Ä–µ–¥–¥–∏–∞–±–µ—Ç–∞/–¥–∏–∞–±–µ—Ç–∞. –°–ª–µ–¥–∏—Ç—å —Å HbA1c –∏ –≥–ª—é–∫–æ–∑–æ—Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω—ã–º —Ç–µ—Å—Ç–æ–º.",
    "hba1c": "HbA1c ‚Äî —Å—Ä–µ–¥–Ω—è—è –≥–ª—é–∫–æ–∑–∞ –∑–∞ 3 –º–µ—Å. –£–¥–æ–±–µ–Ω –¥–ª—è —Å–∫—Ä–∏–Ω–∏–Ω–≥–∞ –ø—Ä–µ–¥–¥–∏–∞–±–µ—Ç–∞/–¥–∏–∞–±–µ—Ç–∞.",
    "alt_ast": "–ê–õ–¢/–ê–°–¢ ‚Äî —Ñ–µ—Ä–º–µ–Ω—Ç—ã –ø–µ—á–µ–Ω–∏. –†–æ—Å—Ç: –∞–ª–∫–æ–≥–æ–ª—å, –æ–∂–∏—Ä–µ–Ω–∏–µ –ø–µ—á–µ–Ω–∏, –ª–µ–∫–∞—Ä—Å—Ç–≤–∞. –°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å —Å –£–ó–ò –∏ –æ–±—Ä–∞–∑–æ–º –∂–∏–∑–Ω–∏.",
    "ggt": "–ì–ì–¢ ‚Äî —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∫ –∞–ª–∫–æ–≥–æ–ª—é/–∂–µ–ª—á–∏. –ß–∞—Å—Ç–æ —Ä–∞—Å—Ç—ë—Ç –ø—Ä–∏ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏ –∞–ª–∫–æ–≥–æ–ª–µ–º/–∑–∞—Å—Ç–æ–µ –∂–µ–ª—á–∏.",
    "bilirubin": "–ë–∏–ª–∏—Ä—É–±–∏–Ω ‚Äî –ø–µ—á–µ–Ω—å/–∂–µ–ª—á—å. –†–æ—Å—Ç: –ø—Ä–æ–±–ª–µ–º—ã –æ—Ç—Ç–æ–∫–∞ –∂–µ–ª—á–∏, –≥–µ–º–æ–ª–∏–∑. –ë—ã–≤–∞–µ—Ç –¥–æ–±—Ä–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≥–∏–ø–µ—Ä–±–∏–ª–∏—Ä—É–±–∏–Ω–µ–º–∏—è (–ì–∏–ª—å–±–µ—Ä—Ç).",
    "chol_total": "–û–±—â–∏–π —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω ‚Äî –æ–±—â–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä. –í–∞–∂–Ω–µ–µ —Å–º–æ—Ç—Ä–µ—Ç—å –õ–ü–ù–ü, –õ–ü–í–ü, –¢–ì.",
    "ldl": "–õ–ü–ù–ü (¬´–ø–ª–æ—Ö–æ–π¬ª). –í—ã—Å–æ–∫–∏–π ‚Äî —Ñ–∞–∫—Ç–æ—Ä —Ä–∏—Å–∫–∞ –°–°–ó. –ö–æ—Ä—Ä–µ–∫—Ü–∏—è: –ø–∏—Ç–∞–Ω–∏–µ, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –∏–Ω–æ–≥–¥–∞ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é –≤—Ä–∞—á–∞.",
    "hdl": "–õ–ü–í–ü (¬´—Ö–æ—Ä–æ—à–∏–π¬ª). –í—ã—à–µ ‚Äî –ª—É—á—à–µ. –†–∞—Å—Ç—ë—Ç –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –æ–º–µ–≥–∞-3.",
    "tg": "–¢—Ä–∏–≥–ª–∏—Ü–µ—Ä–∏–¥—ã ‚Äî –∂–∏—Ä—ã –∫—Ä–æ–≤–∏. –í—ã—Å–æ–∫–∏–µ: –∏–∑–±—ã—Ç–æ–∫ —Å–∞—Ö–∞—Ä–∞/–∞–ª–∫–æ–≥–æ–ª—è/–∫–∞–ª–æ—Ä–∏–π.",
    "creatinine": "–ö—Ä–µ–∞—Ç–∏–Ω–∏–Ω ‚Äî –ø–æ—á–∫–∏. –û—Ü–µ–Ω–∏–≤–∞—é—Ç –≤–º–µ—Å—Ç–µ —Å –°–ö–§.",
    "egfr": "–°–ö–§ ‚Äî —Ä–∞—Å—á—ë—Ç–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ—á–µ–∫. –í–∞–∂–Ω–æ —Å –∫—Ä–µ–∞—Ç–∏–Ω–∏–Ω–æ–º/–¥–∞–≤–ª–µ–Ω–∏–µ–º.",
    "uric_acid": "–ú–æ—á–µ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞. –í—ã—Å–æ–∫–∞—è: –ø–æ–¥–∞–≥—Ä–∞/–º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏. –ö–æ—Ä—Ä–µ–∫—Ü–∏—è –¥–∏–µ—Ç–æ–π –∏ –º–∞—Å—Å–æ–π.",
    "crp": "–°–†–ë ‚Äî –º–∞—Ä–∫—ë—Ä –≤–æ—Å–ø–∞–ª–µ–Ω–∏—è. –í—ã—Å–æ–∫–∏–π: –æ—Å—Ç—Ä–æ–µ/—Ö—Ä–æ–Ω–∏—á–µ—Å–∫–æ–µ –≤–æ—Å–ø–∞–ª–µ–Ω–∏–µ.",
    "wbc": "–õ–µ–π–∫–æ—Ü–∏—Ç—ã ‚Äî –∏–º–º—É–Ω–∏—Ç–µ—Ç. –í—ã—Å–æ–∫–∏–µ: –≤–æ—Å–ø–∞–ª–µ–Ω–∏–µ; –Ω–∏–∑–∫–∏–µ: –¥–µ—Ñ–∏—Ü–∏—Ç—ã/—Å—É–ø—Ä–µ—Å—Å–∏—è.",
    "rbc": "–≠—Ä–∏—Ç—Ä–æ—Ü–∏—Ç—ã ‚Äî –∫–∏—Å–ª–æ—Ä–æ–¥/–ø–µ—Ä–µ–Ω–æ—Å. –°–º. –≤–º–µ—Å—Ç–µ —Å Hb, Hct.",
    "platelets": "–¢—Ä–æ–º–±–æ—Ü–∏—Ç—ã ‚Äî —Å–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ. –û—Ü–µ–Ω–∏–≤–∞—Ç—å —Å –∫–æ–∞–≥—É–ª–æ–≥—Ä–∞–º–º–æ–π.",
    "iron": "–ñ–µ–ª–µ–∑–æ —Å—ã–≤–æ—Ä–æ—Ç–æ—á–Ω–æ–µ ‚Äî –∫–æ–ª–µ–±–ª–µ—Ç—Å—è, –ª—É—á—à–µ —Ñ–µ—Ä—Ä–∏—Ç–∏–Ω/–û–ñ–°–°.",
    "tsh": "–¢–¢–ì ‚Äî —â–∏—Ç–æ–≤–∏–¥–∫–∞. –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç T3/T4 –∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —ç–Ω–¥–æ–∫—Ä–∏–Ω–æ–ª–æ–≥–∞.",
    "ft4": "–°–≤–æ–±–æ–¥–Ω—ã–π T4 ‚Äî —Ñ—É–Ω–∫—Ü–∏—è —â–∏—Ç–æ–≤–∏–¥–∫–∏. –°–º–æ—Ç—Ä–µ—Ç—å —Å –¢–¢–ì/–¢3.",
    "ft3": "–°–≤–æ–±–æ–¥–Ω—ã–π T3 ‚Äî –∞–∫—Ç–∏–≤–Ω–∞—è —Ñ–æ—Ä–º–∞. –í –∫–æ–º–ø–ª–µ–∫—Å–µ —Å –¢–¢–ì/T4.",
    "magnesium": "–ú–∞–≥–Ω–∏–π ‚Äî –º—ã—à—Ü—ã/–Ω–µ—Ä–≤—ã. –î–µ—Ñ–∏—Ü–∏—Ç: —Å—É–¥–æ—Ä–æ–≥–∏, —É—Ç–æ–º–ª—è–µ–º–æ—Å—Ç—å.",
    "calcium": "–ö–∞–ª—å—Ü–∏–π ‚Äî –∫–æ—Å—Ç–∏/–Ω–µ—Ä–≤—ã. –°–º–æ—Ç—Ä–∏ –æ–±—â–∏–π/–∏–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ PTH.",
    "potassium": "–ö–∞–ª–∏–π ‚Äî —Å–µ—Ä–¥—Ü–µ/–Ω–µ—Ä–≤—ã. –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ–ø–∞—Å–Ω—ã ‚Äî –Ω–µ —Å–∞–º–æ–ª–µ—á–∏—Ç—å—Å—è!",
    "sodium": "–ù–∞—Ç—Ä–∏–π ‚Äî –≤–æ–¥–Ω—ã–π –±–∞–ª–∞–Ω—Å. –°–¥–≤–∏–≥–∏ –ø—Ä–∏ –æ–±–µ–∑–≤–æ–∂–∏–≤–∞–Ω–∏–∏/–ø–∞—Ç–æ–ª–æ–≥–∏—è—Ö.",
    "vitamin_b9": "–§–æ–ª–∞—Ç ‚Äî –∫—Ä–æ–≤—å/–Ω–µ—Ä–≤—ã/–±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å. –î–µ—Ñ–∏—Ü–∏—Ç —á–∞—Å—Ç —É —Å–∫—É–¥–Ω–æ–≥–æ —Ä–∞—Ü–∏–æ–Ω–∞.",
    "coagulation": "–ö–æ–∞–≥—É–ª–æ–≥—Ä–∞–º–º–∞ ‚Äî —Å–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ. –í–∞–∂–Ω–æ –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏/–ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∫—Ä–æ–≤–æ—Ç–æ—á–∏–≤–æ—Å—Ç—å—é.",
    "alp": "–©–§ ‚Äî –∂–µ–ª—á—å/–∫–æ—Å—Ç–∏. –†–æ—Å—Ç –ø—Ä–∏ —Ö–æ–ª–µ—Å—Ç–∞–∑–µ/—Ä–æ—Å—Ç–µ –∫–æ—Å—Ç–µ–π/–±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏.",
    "amylase": "–ê–º–∏–ª–∞–∑–∞ ‚Äî –ø–æ–¥–∂–µ–ª—É–¥–æ—á–Ω–∞—è. –†–æ—Å—Ç –ø—Ä–∏ –ø–∞–Ω–∫—Ä–µ–∞—Ç–∏—Ç–µ/—Å–ª—é–Ω–Ω—ã—Ö –∂–µ–ª–µ–∑–∞—Ö.",
    "lipase": "–õ–∏–ø–∞–∑–∞ ‚Äî –ø–æ–¥–∂–µ–ª—É–¥–æ—á–Ω–∞—è. –ë–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞ –¥–ª—è –ø–∞–Ω–∫—Ä–µ–∞—Ç–∏—Ç–∞.",
    "vitamin_b6": "B6 ‚Äî –º–µ—Ç–∞–±–æ–ª–∏–∑–º, –Ω–µ—Ä–≤—ã. –ò–∑–±—ã—Ç–æ–∫ –¥–æ–±–∞–≤–æ–∫ —Ç–æ–∂–µ –≤—Ä–µ–¥–µ–Ω.",
    "omega3_index": "–ò–Ω–¥–µ–∫—Å –æ–º–µ–≥–∞-3 ‚Äî –º–∞—Ä–∫—ë—Ä –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –æ–º–µ–≥–∞-3 –∂–∏—Ä–æ–≤.",
    "insulin": "–ò–Ω—Å—É–ª–∏–Ω –Ω–∞—Ç–æ—â–∞–∫ ‚Äî –æ—Ü–µ–Ω–∫–∞ –ò–† —Å HOMA-IR, –æ–±—Å—É–∂–¥–∞—Ç—å —Å –≤—Ä–∞—á–æ–º.",
    "homocysteine": "–ì–æ–º–æ—Ü–∏—Å—Ç–µ–∏–Ω ‚Äî —Å–æ—Å—É–¥–∏—Å—Ç—ã–µ —Ä–∏—Å–∫–∏, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç B12/B9/B6.",
}

# ================================
# --------- –ü–†–ò–õ–û–ñ–ï–ù–ò–ï PTB -------
# ================================
application: Application = ApplicationBuilder().token(BOT_TOKEN).build()


# ================================
# --------- –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò ----------
# ================================

async def cmd_start(update: Update, context: CallbackContext):
    text = (
        "üëã –ü—Ä–∏–≤–µ—Ç! –Ø Life Rhythm.\n\n"
        "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n"
        "/help ‚Äî —Å–ø—Ä–∞–≤–∫–∞\n"
        "/exercise [N] ‚Äî —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3, –º–∞–∫—Å–∏–º—É–º 10)\n"
        "/meditation [N] ‚Äî –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ (3..10)\n"
        "/yoga [N] ‚Äî –π–æ–≥–∞-–ø–æ–∑—ã —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º (3..10)\n"
        "/nutrition [N] ‚Äî —Å–æ–≤–µ—Ç—ã –ø–æ –ø–∏—Ç–∞–Ω–∏—é (5..20)\n"
        "/analysis <–∫–ª—é—á> ‚Äî –∫—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∞–Ω–∞–ª–∏–∑—É (—Å–º. /analysis list)\n"
        "/water [–º–ª] ‚Äî —É—á—ë—Ç –≤–æ–¥—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 250 –º–ª)\n"
        "/stats ‚Äî —Å–∫–æ–ª—å–∫–æ –≤–æ–¥—ã –≤—ã–ø–∏—Ç–æ —Å–µ–≥–æ–¥–Ω—è\n"
        "/setdob YYYY-MM-DD ‚Äî –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –¥–ª—è /biorhythm\n"
        "/biorhythm ‚Äî –±–∏–æ-—Ä–∏—Ç–º—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è\n"
    )
    await update.effective_message.reply_text(text)

async def cmd_help(update: Update, context: CallbackContext):
    await cmd_start(update, context)

def format_block(title: str, lines: List[str]) -> str:
    out = f"‚Ä¢ <b>{title}</b>\n"
    for i, l in enumerate(lines, 1):
        out += f"  {i}. {l}\n"
    return out

async def cmd_exercise(update: Update, context: CallbackContext):
    n = parse_n(context.args, default=3, min_v=1, max_v=10)
    items = random.sample(EXERCISES, k=min(n, len(EXERCISES)))
    text = "üèÉ <b>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</b> ‚Äî –¥–µ–ª–∞–π —Ä–∞–∑–º–∏–Ω–∫—É –∏ –ø—Ä–∏—Å–ª—É—à–∏–≤–∞–π—Å—è –∫ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—é.\n\n"
    for it in items:
        text += format_block(it["title"], it["steps"]) + "\n"
    for part in chunk_text(text):
        await update.effective_message.reply_text(part, parse_mode=ParseMode.HTML)

async def cmd_meditation(update: Update, context: CallbackContext):
    n = parse_n(context.args, default=3, min_v=1, max_v=10)
    items = random.sample(MEDITATIONS, k=min(n, len(MEDITATIONS)))
    text = "üßò <b>–î—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏</b> ‚Äî –º—è–≥–∫–æ, –±–µ–∑ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è.\n\n"
    for it in items:
        text += format_block(it["title"], it["how"]) + "\n"
    for part in chunk_text(text):
        await update.effective_message.reply_text(part, parse_mode=ParseMode.HTML)

async def cmd_yoga(update: Update, context: CallbackContext):
    n = parse_n(context.args, default=3, min_v=1, max_v=10)
    items = random.sample(YOGA, k=min(n, len(YOGA)))
    text = "üåø <b>–ô–æ–≥–∞-–ø–æ–∑—ã</b> ‚Äî –±–µ–∑ –±–æ–ª–∏, –≤ —Å–≤–æ—ë–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ.\n\n"
    for it in items:
        text += format_block(it["title"], it["how"]) + "\n"
    for part in chunk_text(text):
        await update.effective_message.reply_text(part, parse_mode=ParseMode.HTML)

async def cmd_nutrition(update: Update, context: CallbackContext):
    n = parse_n(context.args, default=10, min_v=5, max_v=20)
    items = random.sample(NUTRITION_TIPS, k=min(n, len(NUTRITION_TIPS)))
    text = "ü•ó <b>–ü–∏—Ç–∞–Ω–∏–µ</b> ‚Äî –ø—Ä–æ—Å—Ç—ã–µ —Ä–∞–±–æ—á–∏–µ —Å–æ–≤–µ—Ç—ã:\n\n"
    for i, tip in enumerate(items, 1):
        text += f"{i}. {tip}\n"
    for part in chunk_text(text):
        await update.effective_message.reply_text(part, parse_mode=ParseMode.HTML)

async def cmd_analysis(update: Update, context: CallbackContext):
    if not context.args:
        keys = ", ".join(sorted(ANALYSIS_DB.keys()))
        await update.effective_message.reply_text(
            "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: <code>/analysis –∫–ª—é—á</code>\n"
            "–ù–∞–ø—Ä–∏–º–µ—Ä: <code>/analysis ferritin</code>\n\n"
            "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–ª—é—á–∏:\n" + keys,
            parse_mode=ParseMode.HTML
        )
        return
    key = context.args[0].lower()
    if key == "list":
        keys = ", ".join(sorted(ANALYSIS_DB.keys()))
        await update.effective_message.reply_text("–ö–ª—é—á–∏: " + keys)
        return
    info = ANALYSIS_DB.get(key)
    if not info:
        await update.effective_message.reply_text("–ù–µ –∑–Ω–∞—é —Ç–∞–∫–æ–π –∫–ª—é—á. –ù–∞–ø–∏—à–∏ /analysis list")
        return
    text = f"üß™ <b>{key}</b>\n{info}\n\n<b>–í–∞–∂–Ω–æ:</b> —ç—Ç–æ –Ω–µ –º–µ–¥—Å–æ–≤–µ—Ç. –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é –¥–µ–ª–∞–µ—Ç –≤—Ä–∞—á."
    await update.effective_message.reply_text(text, parse_mode=ParseMode.HTML)

def today_str() -> str:
    return date.today().isoformat()

async def cmd_water(update: Update, context: CallbackContext):
    ml = 250
    if context.args:
        try:
            ml = max(50, min(2000, int(context.args[0])))
        except Exception:
            pass
    uid = update.effective_user.id
    day = today_str()
    user = WATER_STATE.setdefault(uid, {})
    user[day] = user.get(day, 0) + ml
    total = user[day]
    goal = 2000
    await update.effective_message.reply_text(f"üíß +{ml} –º–ª. –í—Å–µ–≥–æ —Å–µ–≥–æ–¥–Ω—è: {total} –º–ª (—Ü–µ–ª—å ~{goal} –º–ª).")

async def cmd_stats(update: Update, context: CallbackContext):
    uid = update.effective_user.id
    day = today_str()
    total = WATER_STATE.get(uid, {}).get(day, 0)
    await update.effective_message.reply_text(f"üìä –í–æ–¥–∞ —Å–µ–≥–æ–¥–Ω—è: {total} –º–ª.")

def parse_date(s: str) -> date:
    y, m, d = s.split("-")
    return date(int(y), int(m), int(d))

def biorhythm_percent(days: int, period: float) -> int:
    # –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—É—Å–æ–∏–¥–∞ 0..100
    val = (math.sin(2 * math.pi * days / period) + 1) / 2
    return int(round(val * 100))

async def cmd_setdob(update: Update, context: CallbackContext):
    if not context.args:
        await update.effective_message.reply_text("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: /setdob YYYY-MM-DD")
        return
    try:
        dt = parse_date(context.args[0])
        DOB_STATE[update.effective_user.id] = dt.isoformat()
        await update.effective_message.reply_text(f"‚úÖ –î–∞—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞: {dt.isoformat()}")
    except Exception:
        await update.effective_message.reply_text("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç. –ü—Ä–∏–º–µ—Ä: /setdob 1990-08-20")

async def cmd_biorhythm(update: Update, context: CallbackContext):
    uid = update.effective_user.id
    dob_s = DOB_STATE.get(uid)
    if not dob_s:
        await update.effective_message.reply_text("–°–Ω–∞—á–∞–ª–∞ /setdob YYYY-MM-DD")
        return
    dob = parse_date(dob_s)
    days = (date.today() - dob).days
    physical = biorhythm_percent(days, 23.0)
    emotional = biorhythm_percent(days, 28.0)
    intellectual = biorhythm_percent(days, 33.0)
    text = (
        "üìà <b>–ë–∏–æ—Ä–∏—Ç–º—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</b>\n"
        f"–§–∏–∑–∏—á–µ—Å–∫–∏–π: {physical}%\n"
        f"–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π: {emotional}%\n"
        f"–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π: {intellectual}%\n\n"
        "–≠—Ç–æ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞. –°–ª—É—à–∞–π —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ –∏ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–π—Å—è –Ω–∞ —Ñ–∞–∫—Ç—ã."
    )
    await update.effective_message.reply_text(text, parse_mode=ParseMode.HTML)

# –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—ã
application.add_handler(CommandHandler("start", cmd_start))
application.add_handler(CommandHandler("help", cmd_help))
application.add_handler(CommandHandler("exercise", cmd_exercise))
application.add_handler(CommandHandler("meditation", cmd_meditation))
application.add_handler(CommandHandler("yoga", cmd_yoga))
application.add_handler(CommandHandler("nutrition", cmd_nutrition))
application.add_handler(CommandHandler("analysis", cmd_analysis))
application.add_handler(CommandHandler("water", cmd_water))
application.add_handler(CommandHandler("stats", cmd_stats))
application.add_handler(CommandHandler("setdob", cmd_setdob))
application.add_handler(CommandHandler("biorhythm", cmd_biorhythm))

# ================================
# --------- FLASK (WEB) ----------
# ================================
app = Flask(__name__)

@app.get("/")
def index():
    return "LifeRhythm Bot is running. Use /healthz for health."

@app.get("/healthz")
def healthz():
    # Render health-check
    return jsonify(ok=True, time=datetime.utcnow().isoformat())

# –í–ù–ò–ú–ê–ù–ò–ï: async-view —Ç—Ä–µ–±—É–µ—Ç Flask[async] (–º—ã –¥–æ–±–∞–≤–∏–ª–∏ –≤ requirements).
@app.post(TELEGRAM_WEBHOOK_PATH)
async def telegram_webhook():
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º PTB-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–¥–∏–Ω —Ä–∞–∑ (–ª–µ–Ω–∏–≤–æ, –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∞–ø–¥–µ–π—Ç–µ)
    if not application.running:
        await application.initialize()
        await application.start()
    # –ß–∏—Ç–∞–µ–º –∞–ø–¥–µ–π—Ç –∏ –æ—Ç–¥–∞—ë–º PTB
    data = request.get_json(silent=True, force=True)
    if not data:
        return jsonify(ok=False, error="no json"), 400
    update = Update.de_json(data, application.bot)
    await application.process_update(update)
    return jsonify(ok=True)

async def setup_webhook_once(bot: Bot):
    # –°—Ç–∞–≤–∏–º –≤–µ–±—Ö—É–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ —á–∏—Å—Ç–∏–º —Ö–≤–æ—Å—Ç—ã
    await bot.set_webhook(
        url=TELEGRAM_WEBHOOK_URL,
        allowed_updates=Update.ALL_TYPES,
        drop_pending_updates=True,
    )
    print(f"[OK] Webhook set to {TELEGRAM_WEBHOOK_URL}")

if __name__ == "__main__":
    # 1) –°—Ç–∞–≤–∏–º –≤–µ–±—Ö—É–∫ (–±–µ–∑ –∑–∞–ø—É—Å–∫–∞ polling)
    asyncio.run(setup_webhook_once(Bot(token=BOT_TOKEN)))
    # 2) –°—Ç–∞—Ä—Ç—É–µ–º Flask-—Å–µ—Ä–≤–µ—Ä –¥–ª—è Render
    app.run(host="0.0.0.0", port=PORT)
